-- ═══════════════════════════════════════
-- SEED DATA - ПОЛИКЛИНИКА СВЯТОГО МУНГО
-- Тема: Мир Гарри Поттера
-- ═══════════════════════════════════════

-- ═══════════════════════════════════════
-- СПРАВОЧНИКИ АДРЕСОВ
-- ═══════════════════════════════════════

INSERT INTO countries (code, name) VALUES
('RU', 'Россия'),
('UK', 'Великобритания'),
('FR', 'Франция');

INSERT INTO towns (country_id, code, name) VALUES
(1, 'TOMSK', 'Томск'),
(1, 'MOSCOW', 'Москва'),
(2, 'LONDON', 'Лондон'),
(2, 'HOGSMEAD', 'Хогсмид');

INSERT INTO streets (town_id, code, name) VALUES
-- Томск
(1, 'LENINA', 'проспект Ленина'),
(1, 'KIROVA', 'улица Кирова'),
(1, 'FRUNZE', 'улица Фрунзе'),
(1, 'VERSHININA', 'улица Вершинина'),
(1, 'KRASNARM', 'улица Красноармейская'),
-- Лондон
(3, 'DIAGON', 'Диагон-аллея'),
(3, 'GRIMM', 'площадь Гриммо');

-- ═══════════════════════════════════════
-- СПЕЦИАЛЬНОСТИ ВРАЧЕЙ
-- ═══════════════════════════════════════

INSERT INTO specialties (name, description) VALUES
('Магическая травмология', 'Лечение травм от заклинаний и магических существ'),
('Зельеварение лечебное', 'Изготовление и назначение целебных зелий'),
('Заклинательная медицина', 'Лечение с помощью заклинаний и контрпроклятий'),
('Магозоология медицинская', 'Лечение укусов и травм от магических существ'),
('Психомагия', 'Лечение последствий непростительных заклятий'),
('Трансфигурационная хирургия', 'Восстановление органов магическими методами');

-- ═══════════════════════════════════════
-- КАБИНЕТЫ ПОЛИКЛИНИКИ
-- ═══════════════════════════════════════

INSERT INTO rooms (number, floor, room_type, description) VALUES
-- Магическая травмология
('101', 1, 'specialist', 'Кабинет магической травмологии №1'),
('102', 1, 'specialist', 'Кабинет магической травмологии №2'),
-- Зельеварение
('201', 2, 'laboratory', 'Лаборатория зельеварения'),
('202', 2, 'specialist', 'Кабинет консультаций по зельям'),
-- Заклинательная медицина
('301', 3, 'specialist', 'Кабинет заклинательной медицины'),
-- Магозоология
('302', 3, 'specialist', 'Кабинет магозоологии'),
-- Психомагия
('401', 4, 'specialist', 'Кабинет психомагии и легилименции'),
-- Трансфигурационная хирургия
('402', 4, 'specialist', 'Операционная трансфигурации'),
-- Диагностика
('501', 5, 'functional_diagnostics', 'Кабинет магического сканирования'),
('502', 5, 'laboratory', 'Лаборатория анализа магической крови'),
-- Процедурные
('103', 1, 'procedure', 'Процедурный кабинет (зельетерапия)'),
('104', 1, 'emergency', 'Кабинет неотложной магической помощи'),
-- Административные
('REG', 1, 'administrative', 'Регистратура');

-- ═══════════════════════════════════════
-- ВРАЧИ
-- ═══════════════════════════════════════

INSERT INTO doctors (first_name, last_name, patronymic, phone_number, email) VALUES
('Попи', 'Помфри', NULL, '+7-800-555-0001', 'pomfrey@stmungo.magic'),
('Северус', 'Снейп', 'Тобиас', '+7-800-555-0002', 'snape@stmungo.magic'),
('Помона', 'Стебль', NULL, '+7-800-555-0003', 'sprout@stmungo.magic'),
('Гилдерой', 'Локхарт', NULL, '+7-800-555-0004', 'lockhart@stmungo.magic');

-- ═══════════════════════════════════════
-- СВЯЗЬ ВРАЧЕЙ И СПЕЦИАЛЬНОСТЕЙ
-- ═══════════════════════════════════════

INSERT INTO doctor_specialties (doctor_id, specialty_id) VALUES
(1, 1),   -- Помфри - Магическая травмология
(1, 3),   -- Помфри - Заклинательная медицина (совмещение)
(2, 2),   -- Снейп - Зельеварение лечебное
(3, 4),   -- Стебль - Магозоология медицинская
(4, 5);   -- Локхарт - Психомагия

-- ═══════════════════════════════════════
-- РАСПИСАНИЕ ВРАЧЕЙ ПО КАБИНЕТАМ
-- ═══════════════════════════════════════

INSERT INTO doctor_rooms (doctor_id, room_id, day_of_week, start_time, end_time) VALUES
-- Помфри (травмология) - каб. 101
(1, 1, 1, '08:00', '16:00'),  -- Пн
(1, 1, 2, '08:00', '16:00'),  -- Вт
(1, 1, 3, '08:00', '16:00'),  -- Ср
(1, 1, 4, '08:00', '16:00'),  -- Чт
(1, 1, 5, '08:00', '16:00'),  -- Пт
-- Снейп (зельеварение) - каб. 202
(2, 4, 1, '09:00', '17:00'),  -- Пн
(2, 4, 3, '09:00', '17:00'),  -- Ср
(2, 4, 5, '09:00', '17:00'),  -- Пт
-- Стебль (магозоология) - каб. 302
(3, 6, 2, '10:00', '15:00'),  -- Вт
(3, 6, 4, '10:00', '15:00'),  -- Чт
-- Локхарт (психомагия) - каб. 401
(4, 7, 1, '11:00', '18:00'),  -- Пн
(4, 7, 3, '11:00', '18:00'),  -- Ср
(4, 7, 5, '11:00', '18:00');  -- Пт

-- ═══════════════════════════════════════
-- ПАЦИЕНТЫ
-- ═══════════════════════════════════════

INSERT INTO patients (first_name, last_name, patronymic, date_of_birth, gender, phone_number, email, snils, insurance_policy, country_id, town_id, street_id, building, apartment_number, zipcode) VALUES
('Гарри', 'Поттер', 'Джеймсович', '1980-07-31', 'male', '+7-999-777-0001', 'harry.potter@hogwarts.magic', '314-159-265 35', '4567890123456789', 1, 1, 1, '4', '7', '634050'),
('Гермиона', 'Грейнджер', NULL, '1979-09-19', 'female', '+7-999-777-0002', 'hermione.granger@hogwarts.magic', '271-828-182 84', '4567890123456790', 1, 1, 2, '15', '23', '634050'),
('Рональд', 'Уизли', 'Артурович', '1980-03-01', 'male', '+7-999-777-0003', 'ron.weasley@hogwarts.magic', '141-421-356 23', '4567890123456791', 1, 1, 3, '8A', '1', '634050'),
('Драко', 'Малфой', 'Люциусович', '1980-06-05', 'male', '+7-999-777-0004', 'draco.malfoy@hogwarts.magic', '161-803-398 87', '4567890123456792', 1, 1, 4, '13', '99', '634050'),
('Невилл', 'Лонгботтом', 'Фрэнкович', '1980-07-30', 'male', '+7-999-777-0005', 'neville.longbottom@hogwarts.magic', '236-067-977 49', '4567890123456793', 1, 1, 5, '42', '17', '634050'),
('Луна', 'Лавгуд', 'Ксенофилиусовна', '1981-02-13', 'female', '+7-999-777-0006', 'luna.lovegood@hogwarts.magic', '100-000-000 00', '4567890123456794', 1, 1, 1, '77', '13', '634050');

-- ═══════════════════════════════════════
-- ДИАГНОЗЫ (МКБ-10 адаптированный для магов)
-- ═══════════════════════════════════════

INSERT INTO diagnoses (code, name, description) VALUES
('M01', 'Последствия Круциатус', 'Нервные и психические нарушения после пытки'),
('M02', 'Отравление зельем', 'Интоксикация магическими субстанциями'),
('M03', 'Магический ожог', 'Ожог от заклинания или магического огня'),
('M04', 'Заклятие оглушения', 'Последствия Ступефая и подобных заклинаний'),
('M05', 'Укус магического существа', 'Травмы от магических животных'),
('M06', 'Проклятие регургитации', 'Последствия неправильного применения заклинаний'),
('M07', 'Магический грипп', 'Драконья оспа, метловирус'),
('M08', 'Раскол души', 'Последствия создания крестража'),
('M09', 'Проклятие Империус', 'Потеря контроля над волей'),
('M10', 'Магическое истощение', 'Перерасход магической энергии'),
('M11', 'Укус дементора', 'Потеря положительных эмоций'),
('M12', 'Трансфигурационная травма', 'Неправильная трансфигурация');

-- ═══════════════════════════════════════
-- КАТАЛОГ АНАЛИЗОВ
-- ═══════════════════════════════════════

INSERT INTO analyses_catalog (code, name, description) VALUES
('MAG-01', 'Анализ магической крови', 'Определение уровня магии в крови'),
('MAG-02', 'Скан на проклятия', 'Обнаружение наложенных проклятий'),
('MAG-03', 'Зельевая панель', 'Анализ содержания зелий в организме'),
('MAG-04', 'Аура-диагностика', 'Исследование магической ауры пациента'),
('MAG-05', 'Тест на веритасерум', 'Анализ правдивости показаний'),
('MAG-06', 'Ментальный скан', 'Легилименция для диагностики памяти');

-- ═══════════════════════════════════════
-- ЛЕКАРСТВА
-- ═══════════════════════════════════════

INSERT INTO drugs (code, name) VALUES
('POT-01', 'Костерост'),
('POT-02', 'Противоядие универсальное'),
('POT-03', 'Бодроперцовое зелье'),
('POT-04', 'Успокоительная настойка'),
('POT-05', 'Противоожоговая паста'),
('POT-06', 'Зелье Феликс Фелицис'),
('POT-07', 'Кровевосстанавливающее зелье'),
('POT-08', 'Противоядие от безоара'),
('POT-09', 'Напиток покоя'),
('POT-10', 'Мазь мадам Помфри');

-- ═══════════════════════════════════════
-- ПРОЦЕДУРЫ
-- ═══════════════════════════════════════

INSERT INTO procedures (code, name, description) VALUES
('PROC-01', 'Заклинание восстановления костей', 'Brackium Emendo'),
('PROC-02', 'Контрпроклятие общее', 'Снятие тёмных чар'),
('PROC-03', 'Магическое сканирование', 'Диагностика магическим зеркалом'),
('PROC-04', 'Зельетерапия', 'Капельное введение лечебных зелий'),
('PROC-05', 'Легилименция диагностическая', 'Сканирование разума'),
('PROC-06', 'Обливиэйт корректирующий', 'Стирание травматичных воспоминаний'),
('PROC-07', 'Заклинание эпискеи', 'Быстрое заживление мелких ран'),
('PROC-08', 'Трансфигурация лечебная', 'Восстановление тканей');

-- ═══════════════════════════════════════
-- ПРИЁМЫ
-- ═══════════════════════════════════════

INSERT INTO appointments (patient_id, doctor_id, scheduled_at, status, purpose) VALUES
-- Сценарий 1: Гарри Поттер - Магический ожог
(1, 1, '2024-11-15 09:00:00', 'completed', 'Получил ожог от заклинания Инсендио во время тренировки по защите от тёмных искусств'),
-- Сценарий 2: Рон Уизли - Отравление зельем
(3, 2, '2024-11-16 10:00:00', 'completed', 'Выпил любовное зелье по ошибке, принял за тыквенный сок'),
-- Сценарий 3: Невилл Лонгботтом - Укус магического существа
(5, 3, '2024-11-17 11:00:00', 'completed', 'Укусила мандрагора во время урока травологии'),
-- Сценарий 4: Драко Малфой - Последствия проклятия
(4, 4, '2024-11-18 14:00:00', 'completed', 'Наложено проклятие во время сражения, испытываю фантомные боли'),
-- Сценарий 5: Гермиона Грейнджер - Магическое истощение
(2, 1, '2024-11-19 09:30:00', 'completed', 'Чрезмерное использование заклинаний во время экзаменов, упадок сил'),
-- Сценарий 6: Луна Лавгуд - Трансфигурационная травма
(6, 1, '2024-11-20 10:00:00', 'completed', 'Неудачная попытка трансфигурировать кошку в подушку, застряла между формами'),
-- Предстоящие приёмы
(1, 1, '2024-12-10 09:00:00', 'scheduled', 'Контрольный осмотр после ожога'),
(2, 1, '2024-12-11 10:00:00', 'confirmed', 'Повторная консультация'),
(3, 2, '2024-12-12 11:00:00', 'scheduled', 'Проверка после отравления'),
-- Отменённый приём
(4, 4, '2024-11-25 15:00:00', 'cancelled', 'Плановая консультация');

-- ═══════════════════════════════════════
-- МЕДИЦИНСКИЕ ЗАПИСИ
-- ═══════════════════════════════════════

INSERT INTO medical_records (appointment_id, patient_id, diagnosis_id, created_at, description) VALUES
(1, 1, 3, '2024-11-15 09:30:00', 'Пациент получил магический ожог второй степени от заклинания Инсендио. Поражена правая рука от запястья до локтя. Кожные покровы гиперемированы, отёчны, имеются пузыри с магической жидкостью. Магический анализ показывает остаточное огненное заклинание. Наложена противоожоговая паста, проведено заклинание эпискеи. Рекомендован покой на 3 дня.'),
(2, 3, 2, '2024-11-16 10:30:00', 'Пациент поступил в состоянии лёгкой интоксикации любовным зельем. Зельевая панель показала следы амортенции низкой концентрации. Применено универсальное противоядие, проведена зельетерапия с детоксикацией. Состояние стабилизировалось через 2 часа. Рекомендовано наблюдение у зельевара в течение недели.'),
(3, 5, 5, '2024-11-17 11:30:00', 'Пациент получил укус мандрагоры на уроке травологии. Рана на левой руке глубиной 1.5 см, с признаками магического отравления. Проведена обработка раны, наложена мазь мадам Помфри, выполнено контрпроклятие. Аура-диагностика показала слабое проклятие, которое было успешно снято. Заживление должно произойти в течение 5-7 дней.'),
(4, 4, 1, '2024-11-18 14:30:00', 'Пациент обратился с жалобами на фантомные боли после воздействия проклятия Круциатус. Ментальный скан выявил остаточные следы тёмной магии в нервной системе. Проведена диагностическая легилименция, обнаружены травматические воспоминания. Выполнен корректирующий обливиэйт для стирания наиболее болезненных воспоминаний. Назначен курс успокоительных зелий и напиток покоя на ночь.'),
(5, 2, 10, '2024-11-19 10:00:00', 'Пациентка поступила с жалобами на сильную усталость и головокружение после интенсивной подготовки к экзаменам. Анализ магической крови показал критически низкий уровень магической энергии - 23% от нормы. Диагностировано магическое истощение средней степени. Назначено бодроперцовое зелье курсом 7 дней, магическое сканирование через неделю. Рекомендован полный магический покой на 3 дня.'),
(6, 6, 12, '2024-11-20 10:30:00', 'Пациентка обратилась с необычной трансфигурационной травмой. При попытке трансфигурации кошки в подушку произошёл сбой заклинания. Скан на проклятия показал застрявшую между формами структуру. Проведена экстренная лечебная трансфигурация для восстановления нормальной формы тела. Дополнительно выполнено заклинание восстановления костей, так как правая нога была частично трансфигурирована. Назначен Костерост на 5 дней.');

-- ═══════════════════════════════════════
-- АНАЛИЗЫ
-- ═══════════════════════════════════════

INSERT INTO analyses (analysis_catalog_id, appointment_id, diagnosis_id, scheduled_at, completed_at, result) VALUES
-- Для приёма 1 (Гарри - ожог)
(1, 1, 3, '2024-11-15 09:15:00', '2024-11-15 10:00:00', 'Уровень магии: 87% от нормы. Обнаружены следы огненного заклинания в крови. Регенеративные способности в норме.'),
-- Для приёма 2 (Рон - отравление)
(3, 2, 2, '2024-11-16 10:15:00', '2024-11-16 11:00:00', 'Обнаружены следы амортенции низкой концентрации (5 мг/л). Следы обсидиановой пыли, лепестков роз. Печёночные показатели в норме.'),
-- Для приёма 3 (Невилл - укус)
(4, 3, 5, '2024-11-17 11:45:00', '2024-11-17 12:30:00', 'Аура: частично нарушена в области левой руки. Обнаружено слабое проклятие уровня 2 из 10. Магический потенциал: 92%.'),
-- Для приёма 4 (Драко - проклятие)
(6, 4, 1, '2024-11-18 15:00:00', '2024-11-18 16:30:00', 'Ментальный скан: обнаружены множественные травматические воспоминания, связанные с тёмной магией. Рекомендована длительная психомагическая терапия.'),
-- Для приёма 5 (Гермиона - истощение)
(1, 5, 10, '2024-11-19 09:45:00', '2024-11-19 11:00:00', 'Уровень магии критически низкий: 23% от нормы. Эритроциты магической крови истощены. Требуется восстановление.'),
-- Для приёма 6 (Луна - трансфигурация)
(2, 6, 12, '2024-11-20 10:15:00', '2024-11-20 11:00:00', 'Обнаружено застрявшее трансфигурационное заклинание. Магическая структура тела нарушена на 15%. Требуется срочная коррекция.');

-- ═══════════════════════════════════════
-- НАЗНАЧЕНИЯ ЛЕКАРСТВ
-- ═══════════════════════════════════════

INSERT INTO prescription_drugs (medical_record_id, drug_id, dosage, duration) VALUES
-- Запись 1 (Гарри - ожог)
(1, 5, 'Наносить на поражённую область 3 раза в день', '7 дней'),
-- Запись 2 (Рон - отравление)
(2, 2, 'Принять однократно 50 мл', 'однократно'),
(2, 8, 'Принять 30 мл через 2 часа после противоядия', 'однократно'),
-- Запись 3 (Невилл - укус)
(3, 10, 'Наносить на рану 2 раза в день', '5 дней'),
-- Запись 4 (Драко - проклятие)
(4, 9, 'Принимать по 20 мл перед сном', '14 дней'),
(4, 4, 'Принимать по 15 мл 3 раза в день при тревожности', '14 дней'),
-- Запись 5 (Гермиона - истощение)
(5, 3, 'Принимать по 30 мл 2 раза в день', '7 дней'),
-- Запись 6 (Луна - трансфигурация)
(6, 1, 'Принимать по 50 мл перед сном', '5 дней');

-- ═══════════════════════════════════════
-- НАЗНАЧЕНИЯ ПРОЦЕДУР
-- ═══════════════════════════════════════

INSERT INTO prescription_procedures (medical_record_id, procedure_id, quantity, duration_minutes) VALUES
-- Запись 1 (Гарри - ожог)
(1, 7, 1, 15),    -- Заклинание эпискеи
-- Запись 2 (Рон - отравление)
(2, 4, 1, 60),    -- Зельетерапия
-- Запись 3 (Невилл - укус)
(3, 2, 1, 20),    -- Контрпроклятие общее
-- Запись 4 (Драко - проклятие)
(4, 5, 3, 45),    -- Легилименция диагностическая - 3 сеанса
(4, 6, 1, 30),    -- Обливиэйт корректирующий
-- Запись 5 (Гермиона - истощение)
(5, 3, 1, 30),    -- Магическое сканирование
-- Запись 6 (Луна - трансфигурация)
(6, 8, 1, 45),    -- Трансфигурация лечебная
(6, 1, 1, 30);    -- Заклинание восстановления костей
